<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <meta name="description" content="you can find your foods by simply typing their name">
    <title>Meal-Recipeüç¥</title>
    <style>
        *,::after,::before{margin: 0; box-sizing: border-box;}
       html{font-size: 15px;}
       body{font-size: 16px; font-family: system-ui, sans-serif; background: #000000e0;}
       .container{max-width:1400px; margin: auto;  background: transparent; color: #fff; }
       .heading {padding:1.7rem 1.3rem; color: #fff; font-family: 1.4rem;  display: flex; justify-content: space-between; }
       .nav{display: flex; gap: 2rem; color: #000000;}
       .search{font-size: 1.3rem; outline: none;}
       .heading button{padding:1rem 1.9rem; font-size:1.2rem; display: block; font-weight: bolds; border: none;cursor: pointer; background:maroon; color: #fff;}
       /* .heading button:hover {background: #103cbf; color: white;} */
       .info{display: flex;  padding:2rem 6rem; text-align: center;}
       .para{font-size: 1.3rem; padding: 2rem 1rem;}
       .search-meal{text-align: center; padding:2rem 13rem; border-top:6px solid red; border-bottom: 6px solid red;}
       .search-meal p{font-size: 1.4rem;}
       .search-meal .search{margin-bottom: 2rem; padding:1rem 3rem; border-radius:8px; border: none;}
       /* grid */
       .main h2{text-align: center; font-size:2rem; margin-bottom: 1.5rem;}
       .latest-meal{padding:2rem 0;}
       .grid{ display:grid; grid-template-columns:repeat( auto-fit,minmax(350px,1fr)); row-gap:1.2rem; cursor: pointer;}
       .grid .col{  width:330px; height:330px;}
       .grid span{ color:rgb(223, 201, 80);}
       .grid span:hover{ color:rgb(228, 195, 8); cursor: pointer;}
       .popular{border-top:6px solid red; border-bottom: 6px solid red; margin-top: 2rem;}
       .popular-ingrediants{display: grid; grid-template-columns:repeat(auto-fit,minmax(350px,1fr)); text-align:center; padding:2rem 0;}
       .random{border-top: 6px solid red;border-bottom: 6px solid red; margin-top: 1.4rem;}
       footer{display: flex; justify-content: space-between; padding:2rem 1rem; background:transparent; font-size: 1.2rem;}

       .main img{width:330px; height: 330px;}
    </style>
</head>
<body>
    <div class="container">
        <div class="heading">
            <h1>Meal-Recipeüç¥</h1>
            <div class="nav">
                <button>Home</button>
                <input type="search" placeholder="meal name" name="meal" class="search">
            </div>
        </div>

        <div class="info">
            <img src="./meal-icon.png" alt="food" width="256" height="256">
            <div class="para">
                <h2>Welcome to Meal-Recipeüç¥</h2>
                <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Id, laudantium!</p>
                <p>Lorem ipsum dolor sit amet Id, laudantium! consectetur adipisicing elit. Id, laudantium!</p>
            </div>
            <img src="./meal-icon.png" alt="food" width="256" height="256">
        </div>

        <div class="search-meal">
            <input type="search" placeholder="Search for a Meal..." name="meal" class="search">
            <p>üç¥ Total Meals: 304  Total ü•óIngredients: 575 üñºÔ∏è Images: 304</p>
         </div>
         <div class="main">
               <div class="latest-meal">
                <h2>Latest Meals</h2>
                <div class="grid">
                 <div class="show-details">
                   <div class="col"><img src="" alt="latest food image"></div>
                   <span>Migas</span>
                 </div>
                 <div class="show-details">
                   <div class="col"><img src="" alt="latest food image"></div>
                   <span>15-minute chicken & halloumi burgers</span>
                 </div>
                 <div class="show-details">
                   <div class="col"><img src="" alt="latest food image"></div>
                   <span>Lamb Pilaf (Plov)</span>
                 </div>
                 <div class="show-details">
                   <div class="col"><img src="" alt="latest food image"></div>
                   <span>Strawberries Romanoff</span>
                 </div>
                 <div class="show-details">
                   <div class="col"><img src="" alt="latest food image"></div>
                   <span>Potato Salad (Olivier Salad)</span>
                 </div>
                 <div class="show-details">
                   <div class="col"><img src="" alt="latest food image"></div>
                   <span>Blini Pancakes</span>
                 </div>
                 <div class="show-details">
                   <div class="col"><img src="" alt="latest food image"></div>
                   <span>Fish Soup (Ukha)</span>
                 </div>
                 <div class="show-details">
                   <div class="col"><img src="" alt="latest food image"></div>
                   <span>Beetroot Soup (Borscht)</span>
                 </div>
               </div>
               </div>

              <div class="popular">
                   <h2>Popular Ingredients</h2>
                   <div class="popular-ingrediants">
                     <div>
                        <div class="col"><img src="" alt="popular-ingrediants"></div>
                        <span>chicken</span>
                      </div>
                      <div>
                        <div class="col"><img src="" alt="popular-ingrediants"></div>
                        <span>Salmon</span>
                      </div>
                      <div>
                        <div class="col"><img src="" alt="popular-ingrediants"></div>
                        <span>Beef</span>
                      </div>
                      <div>
                        <div class="col"><img src="" alt="popular-ingrediants"></div>
                        <span>Pork</span>
                      </div>
                   </div>     
              </div>
               
              <div class="random-meal">
                <h2>Random Meals</h2>
                <div class="grid">
                 <div>
                   <div class="col"><img src="" alt=""></div>
                   <span></span>
                 </div>
                 <div>
                   <div class="col"><img src="" alt=""></div>
                   <span></span>
                 </div>
                 <div>
                   <div class="col"><img src="" alt=""></div>
                   <span></span>
                 </div>
                 <div>
                   <div class="col"><img src="" alt=""></div>
                   <span> </span>
                 </div>
                 <div>
                   <div class="col"><img src="" alt=""></div>
                   <span></span>
                 </div>
                 <div>
                   <div class="col"><img src="" alt=""></div>
                   <span> </span>
                 </div>
                 <div>
                   <div class="col"><img src="" alt=""></div>
                   <span></span>
                 </div>
                 <div>
                   <div class="col"><img src="" alt=""></div>
                   <span></span>
                 </div>
               </div>
               </div>

              <div class="random">
                <h2>Random Ingredients</h2>
                <div class="random-ingrediants popular-ingrediants">
                  <div>
                     <div class="col"><img src="" alt=""></div>
                     <span></span>
                   </div>
                   <div>
                     <div class="col"><img src="" alt=""></div>
                     <span></span>
                   </div>
                   <div>
                     <div class="col"><img src="" alt=""></div>
                     <span></span>
                   </div>
                   <div>
                     <div class="col"><img src="" alt=""></div>
                     <span></span>
                   </div>
                </div>     
           </div>


         </div>
         <footer>
            <div>
               <p>&copy; 2025 Copyright</p>
                <p>Proudly build in the India</p>
            </div>
            <div>
               <p>Socials <span></span></p>
            </div>
            <div>
               <span>About</span>
               <span>Faq</span>
               <span>Contact</span>
            </div>
        </footer>
    </div>
     <!-- javascript -->
      <script>
        "use Strict"
           const latestMealsName=[
           "Migas",
           "15-minute chicken & halloumi burgers",
           "Lamb Pilaf (Plov)",
           "Strawberries Romanoff",
           "Potato Salad (Olivier Salad)",
           "Blini Pancakes",
           "Fish Soup (Ukha)",
           "Beetroot Soup (Borscht)"
           ];
          
           const latestMealBoxes = document.querySelectorAll('.latest-meal .grid > div');
           const popularIngrediantsMealBox=document.querySelectorAll('.popular .popular-ingrediants > div');
           const randomMealBox=document.querySelectorAll('.random-meal .grid > div');
           const randomIngrediantsMealBox=document.querySelectorAll('.random .random-ingrediants > div');

           // latest-meal fetch api
           async function showMealImage(){
             for(let i=0;i<latestMealsName.length;i++){
               const response=await fetch(`https://www.themealdb.com/api/json/v1/1/search.php?s=${latestMealsName[i]}`);
               const resMeal=await response.json();
              //  console.log(resMeal);
               const ImageUrl=resMeal.meals[0].strMealThumb;//image url
               const imageTag=latestMealBoxes[i].querySelector("img");
               imageTag.src=ImageUrl; //set real image
             }
           }

          //  popular-ingrediants fetch api
          const popularIngrediants=["Chicken","Salmon","Beef","Pork" ]
           async function showPopularIngrediantsImage(){
               const response=await fetch(`https://www.themealdb.com/api/json/v1/1/list.php?i=list`);
               const resMeal=await response.json();
              //  console.log(resMeal);
              const allIngredients=resMeal.meals;
              console.log(allIngredients);
              const selected=allIngredients.filter(ingredients=>popularIngrediants.includes(ingredients.strIngredient));
              console.log(selected);
              selected.forEach((ingredients,index)=>{
                console.log(ingredients,index);
                
                 const imgTag=popularIngrediantsMealBox[index].querySelector("img");
                 imgTag.src=`https://www.themealdb.com/images/ingredients/${ingredients.strIngredient}.png`

              })
           }

          //  random-meal fetch api
           async function showRandomMeal(){
             const randomMealUrl=`https://www.themealdb.com/api/json/v1/1/random.php`
             try{     
                  //make 8 request in parallel
                  const mealPromises=[];
                  for(let i=0;i<8;i++){
                    mealPromises.push(fetch(randomMealUrl).then(res=>res.json()))
                  }
                  // console.log(mealPromises);
                  //wait for all fetch to complete
                  const mealResponses=await Promise.all(mealPromises);
                  // console.log(mealResponses);
                  const mealsData=mealResponses.map(res=>res.meals[0]);
                  // console.log(mealsData[0].strMeal);
                  //feel 8 boxes with meal
                  mealsData.forEach((meal,idx)=>{
                    // console.log(meal,idx);
                    if(randomMealBox[idx]){
                       const img=randomMealBox[idx].querySelector('img');
                       const name=randomMealBox[idx].querySelector('span');
                       img.src=meal.strMealThumb;
                       name.textContent=meal.strMeal;
                       img.alt=meal.strMeal;
                    } 
                  })      
                  
             }catch(err){
                console.log("Error fetching random meals",err);
             }
           }

          //  random-ingrediants fetch api
          async function randomIngrediantsMeal(){

              const url=`https://www.themealdb.com/api/json/v1/1/list.php?i=list`;   
               const response=await fetch(url);
               const resIngredients=await response.json();
               const allIngredients=resIngredients.meals;
              //  console.log(allIngredients);
               
               // generate 4 random ingredients
              const randomIngrediants=[];
              while(randomIngrediants.length<4){
                const random = allIngredients[Math.floor(Math.random()*allIngredients.length)];
                 if(!randomIngrediants.includes(random)){
                   randomIngrediants.push(random)
                 }
              }
              console.log(randomIngrediants);
              randomIngrediants.forEach((ingredients,idx)=>{
                 if(randomIngrediantsMealBox[idx]){
                  const img=randomIngrediantsMealBox[idx].querySelector('img');
                  const name=randomIngrediantsMealBox[idx].querySelector('span');
                  name.textContent=ingredients.strIngredient
                  img.src=`https://www.themealdb.com/images/ingredients/${ingredients.strIngredient}.png`
                  img.alt = ingredients.strIngredient;
                 }
              })
              
          }

           //when page finishing loading ,run the function
          //  showPopularIngrediantsImage()
          //  window.addEventListener("DOMContentLoaded",showMealImage)

          // for page redirect 

         document.querySelectorAll(".show-details").forEach(( element,index )=>{
            element.addEventListener("click",function(){
              // window.location.href="./show-ingrediants.html"
              window.location.href = `./show-ingrediants.html?meal=${encodeURIComponent(latestMealsName[index])}`;
            })
         })

              //find meals and their ingredients by searching their name
                  const mealName=document.querySelectorAll('input[type="search"]') 
    
                  mealName.forEach((search)=>{
                  search.addEventListener("keydown", async function(e){
                  if(e.key==="Enter"){
                     const meals=this.value.trim();
                        console.log(meals);
                      if(meals===""){
                        console.error("message:","please enter meal name")
                        return;
                      }
                      // window.location.href = `./show-ingrediants.html?meal=${encodeURIComponent(meals)}`;
                      try{
                        const response=await fetch(`https://www.themealdb.com/api/json/v1/1/search.php?s=${meals}`);
                        const resMeal=await response.json();

                      }catch(err){
                        console.log(err);
                        
                      }
                  } 
                
              })
         })
         
          window.addEventListener("load", () => {
                      showMealImage();
                      showPopularIngrediantsImage();
                      showRandomMeal()
                      randomIngrediantsMeal()
              });
      </script>
    
</body>
</html>
